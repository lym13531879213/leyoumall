<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.com.mall.operator.mapper.PmsCategoryBrandRelationMapper">
    <select id="getBrandCategoryRelation" resultType="cn.com.mall.operator.pojo.vo.pms.CategoryBrandRelationVO">
        select relation.id         as categoryBrandRelationId,
               relation.brand_id   as brandId,
               relation.catelog_id as catelogId,
               brand.name          as brandName,
               category.name       as catelogName
        from leyoumall.pms_category_brand_relation relation,
             leyoumall.pms_brand brand,
             leyoumall.pms_category category
        where relation.brand_id = brand.brand_id
          and relation.catelog_id = category.cat_id
          and brand.brand_id = #{brandId}
    </select>

    <delete id="deleteBrandCategoryRelation">
        delete
        from leyoumall.pms_category_brand_relation
                where id in
        <foreach collection="ids" separator="," open="(" close=")" item="id">
            #{id}
        </foreach>
    </delete>

    <insert id="addBrandCategoryRelation">
        insert into leyoumall.pms_category_brand_relation(brand_id, catelog_id)
        VALUES (#{brandId}, #{catId})
    </insert>
</mapper>